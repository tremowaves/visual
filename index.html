<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Audio Visual Experience</title>
    <link rel="stylesheet" href="./visual_files/09671da28aa56a04.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        /* Custom styles for better cross-platform compatibility */
        .audio-controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 30px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 1000;
        }
        
        .audio-button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .audio-button:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .audio-button.active {
            color: #4CAF50;
        }
        
        .audio-button i {
            font-size: 24px;
        }
        
        .audio-progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            margin: 0 10px;
            position: relative;
            cursor: pointer;
        }
        
        .audio-progress-bar {
            height: 100%;
            background: #4CAF50;
            border-radius: 2px;
            width: 0%;
            transition: width 0.1s linear;
        }
        
        .audio-time {
            color: white;
            font-size: 14px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        .scene-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .scene-button {
            background: rgba(0, 0, 0, 0.7);
            border: none;
            color: white;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .scene-button:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .scene-button i {
            font-size: 20px;
        }

        .loading-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
            z-index: 1001;
        }

        .loading-bar-progress {
            height: 100%;
            background: #4CAF50;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .playlist-container {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            border-radius: 10px;
            padding: 10px;
            max-height: 300px;
            overflow-y: auto;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 999;
            display: none;
        }

        .playlist-container.show {
            display: block;
        }

        .playlist-item {
            padding: 10px 20px;
            color: white;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .playlist-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .playlist-item.active {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
        }

        .playlist-item i {
            font-size: 16px;
        }

        .playlist-item-title {
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        @media (max-width: 768px) {
            .audio-controls {
                width: 90%;
                justify-content: space-between;
            }
            
            .audio-progress {
                width: 100px;
            }

            .scene-controls {
                bottom: 80px;
                right: 10px;
            }
        }

        .scene-nametag-wrapper {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        .scene-info-tag {
            font-size: 14px;
            opacity: 0.7;
        }

        .scene-name-tag {
            font-size: 18px;
            font-weight: bold;
            margin-left: 10px;
        }

        .background-scene {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 0;
        }

        .renderer-canvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        .audio-load-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            z-index: 1002;
        }

        .audio-load-bar-progress {
            height: 100%;
            background: #4CAF50;
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body data-new-gr-c-s-check-loaded="14.1105.0" data-gr-ext-installed="">
    <div id="__next">
        <div id="asset_loader_wrapper" class="asset-loader-wrapper"></div>
        <div id="rec_wrapper" class="rec-wrapper"></div>
        <div id="app_root">
            <div id="audio_load_bar" class="audio-load-bar">
                <div class="audio-load-bar-progress" id="audio_load_bar_progress"></div>
            </div>
            <audio id="audio_player" style="display: none;">
                <source src="./visual_files/audio/tremowaves_postrock.mp3" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
            <div role="presentation" id="background_scene" class="background-scene" style="position: fixed; top: 0px; left: 0px; width: 100vw; height: 100vh; z-index: 0; opacity: 0.4321;">
                <canvas data-engine="three.js r160" width="1432" height="718" class="renderer-canvas" style="display: block; width: 1432px; height: 718px;"></canvas>
            </div>
            <div class="scene-nametag-wrapper">
                <span class="scene-info-tag" style="opacity: 0;">12/12</span>
                <span class="scene-name-tag" style="opacity: 0;">Swarm</span>
            </div>
            <div class="top-bar plain">
                <div class="loading-bar" id="loading_bar"></div>
            </div>
            <div class="main-contols-wrapper" style="height: 70px; line-height: 70px;">
                <div class="toggler-wrapper" style="width: 70px; height: 70px;">
                    <i class="fa-thin fa-power-off"></i>
                    <span class="temptip--triangle" data-tooltip="Play with me ðŸ˜‰"></span>
                </div>
                <div class="control-buttons">
                    <div id="load_audio_button" class="button fa-thin fa-circle-play inactive" style="color: rgb(204, 204, 204); text-shadow: none; animation-delay: 0s; cursor: default;">
                        <span class="tooltip--triangle load_audio" data-tooltip="I'm Audio-reactive! Try my Jam ðŸ˜ƒ"></span>
                    </div>
                    <div id="first_scene_button" class="button fa-thin fa-circle-chevron-up inactive" style="color: rgb(204, 204, 204); text-shadow: none; animation-delay: 0.12s; cursor: default;">
                        <span class="tooltip--triangle first_scene" data-tooltip="Rewind to First Scene"></span>
                    </div>
                    <div id="prev_scene_button" class="button fa-thin fa-circle-chevron-left inactive" style="color: rgb(204, 204, 204); text-shadow: none; animation-delay: 0.24s; cursor: default;">
                        <span class="tooltip--triangle prev_scene" data-tooltip="Load Previous Scene"></span>
                    </div>
                    <div id="next_scene_button" class="button fa-thin fa-circle-chevron-right inactive" style="color: rgb(204, 204, 204); text-shadow: none; animation-delay: 0.36s; cursor: default;">
                        <span class="tooltip--triangle next_scene" data-tooltip="Load Next Scene"></span>
                    </div>
                    <div id="rand_scene_button" class="button fa-thin fa-shuffle inactive" style="color: rgb(204, 204, 204); text-shadow: none; animation-delay: 0.48s; cursor: default;">
                        <span class="tooltip--triangle rand_scene" data-tooltip="Load Random Scene"></span>
                    </div>
                </div>
            </div>
            <div class="main-menu-wrapper" style="width: 50vw; left: calc(21px + 100vw);">
                <div id="menu_toggler" class="togglebutton" role="presentation" style="width: 70px; height: 70px;">
                    <div role="presentation">
                        <svg class="ham ham3" viewBox="0 0 100 100" width="70px">
                            <path class="ham-line top" d="m 30,33 h 40 c 13.100415,0 14.380204,31.80258 6.899646,33.421777 -24.612039,5.327373 9.016154,-52.337577 -12.75751,-30.563913 l -28.284272,28.284272"></path>
                            <path class="ham-line middle" d="m 70,50 c 0,0 -32.213436,0 -40,0 -7.786564,0 -6.428571,-4.640244 -6.428571,-8.571429 0,-5.895471 6.073743,-11.783399 12.286435,-5.570707 6.212692,6.212692 28.284272,28.284272 28.284272,28.284272"></path>
                            <path class="ham-line bottom" d="m 69.575405,67.073826 h -40 c -13.100415,0 -14.380204,-31.80258 -6.899646,-33.421777 24.612039,-5.327373 -9.016154,52.337577 12.75751,30.563913 l 28.284272,-28.284272"></path>
                        </svg>
                    </div>
                </div>
                <div class="main-menu" role="presentation" style="width: 50vw; left: calc(21px + 100vw);">
                    <div class="main-menu-links-wrapper">
                        <!-- Menu links giá»¯ nguyÃªn nhÆ° visual.html -->
                    </div>
                </div>
            </div>
            <section class="route-section">
                <div class="route-inner">
                    <div class="main">
                        <div class="content">
                            <div class="home-page">
                                <h1>Swarm</h1>
                                <h2>Marco Gomez' WebGL Portfolio</h2>
                                <h3>#Boids</h3>
                                <h4>by @TheCodeTherapy - https://mgz.me</h4>
                                <img alt="Instanced meshes governed by a flocking behaviour controller class in a universe of instanced star textured particles." loading="lazy" width="1024" height="1024" decoding="async" data-nimg="1" class="home-page-image" src="./visual_files/Swarm.jpg" style="color: transparent;">
                                <p>Instanced meshes governed by a flocking behaviour controller class in a universe of instanced star textured particles.</p>
                                <a class="home-page-links" href="https://mgz.me/">Home</a>
                                <a class="home-page-links" href="https://mgz.me/about/">About</a>
                                <a class="home-page-links" href="https://mgz.me/gallery/">Gallery</a>
                                <a class="home-page-links" href="https://mgz.me/awards/">Awards</a>
                                <a class="home-page-links" href="https://mgz.me/contact/">Contact</a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <div class="footer">
                <div class="copy">
                    <span class="copy-symbol">Â©</span>
                    <a href="https://x.com/TheCodeTherapy" target="_blank" rel="noopener noreferrer">Marco Gomez (@TheCodeTherapy)</a> 2025
                </div>
            </div>
        </div>
    </div>
    <script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"scene":"Swarm","thumbURL":"/assets/thumbnails/Swarm.jpg"},"__N_SSG":true},"page":"/scenes/[scene]","query":{"scene":"Swarm"},"buildId":"muC72ZvF1QV4vWLtMoECr","isFallback":false,"gsp":true,"scriptLoader":[]}</script>
    <script src="./visual_files/polyfills-78c92fac7aa8fdd8.js" defer></script>
    <script src="./visual_files/webpack-edb2c4a2f993b241.js" defer></script>
    <script src="./visual_files/framework-64ad27b21261a9ce.js" defer></script>
    <script src="./visual_files/main-fdaa1ee0a0da5110.js" defer></script>
    <script src="./visual_files/_app-e5b0d1bc4a1b4a04.js" defer></script>
    <script src="./visual_files/962-e60f5ac397ddcfd8.js" defer></script>
    <script src="./visual_files/675-f8402c4ff683825d.js" defer></script>
    <script src="./visual_files/[scene]-065109fd0275efe4.js" defer></script>
    <script src="./visual_files/_buildManifest.js" defer></script>
    <script src="./visual_files/_ssgManifest.js" defer></script>
    <script>
        // Audio player functionality
        const audioPlayer = document.getElementById('audio_player');
        const playPauseButton = document.getElementById('play_pause_button');
        const volumeButton = document.getElementById('volume_button');
        const audioProgress = document.getElementById('audio_progress');
        const audioProgressBar = document.getElementById('audio_progress_bar');
        const currentTimeDisplay = document.getElementById('current_time');
        const durationDisplay = document.getElementById('duration');
        const loadingBarProgress = document.getElementById('loading_bar_progress');
        const playlistButton = document.getElementById('playlist_button');
        const playlistContainer = document.getElementById('playlist_container');
        
        // Scene controls
        const firstSceneButton = document.getElementById('first_scene_button');
        const prevSceneButton = document.getElementById('prev_scene_button');
        const nextSceneButton = document.getElementById('next_scene_button');
        const randSceneButton = document.getElementById('rand_scene_button');
        
        // Playlist functionality
        let currentTrackIndex = 0;
        const playlist = [
            {
                title: 'Tremowaves Postrock',
                file: './visual_files/audio/tremowaves_postrock.mp3'
            }
            // Add more tracks here as needed
        ];

        // Initialize playlist
        function initializePlaylist() {
            const playlistHTML = playlist.map((track, index) => `
                <div class="playlist-item ${index === currentTrackIndex ? 'active' : ''}" data-index="${index}">
                    <i class="fa-thin fa-music"></i>
                    <span class="playlist-item-title">${track.title}</span>
                </div>
            `).join('');
            playlistContainer.innerHTML = playlistHTML;

            // Add click event to playlist items
            document.querySelectorAll('.playlist-item').forEach(item => {
                item.addEventListener('click', function() {
                    const index = parseInt(this.dataset.index);
                    playTrack(index);
                });
            });
        }

        // Play specific track
        function playTrack(index) {
            currentTrackIndex = index;
            const track = playlist[index];
            audioPlayer.src = track.file;
            audioPlayer.play();
            playPauseButton.innerHTML = '<i class="fa-thin fa-pause"></i>';
            playPauseButton.classList.add('active');
            
            // Update active state in playlist
            document.querySelectorAll('.playlist-item').forEach(item => {
                item.classList.toggle('active', parseInt(item.dataset.index) === index);
            });
        }

        // Toggle playlist visibility
        playlistButton.addEventListener('click', function() {
            playlistContainer.classList.toggle('show');
        });

        // Close playlist when clicking outside
        document.addEventListener('click', function(e) {
            if (!playlistContainer.contains(e.target) && !playlistButton.contains(e.target)) {
                playlistContainer.classList.remove('show');
            }
        });

        // Handle track end
        audioPlayer.addEventListener('ended', function() {
            currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
            playTrack(currentTrackIndex);
        });

        // Format time in MM:SS
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            seconds = Math.floor(seconds % 60);
            return `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Update progress bar
        function updateProgress() {
            const progress = (audioPlayer.currentTime / audioPlayer.duration) * 100;
            audioProgressBar.style.width = `${progress}%`;
            currentTimeDisplay.textContent = formatTime(audioPlayer.currentTime);
        }
        
        // Update loading bar
        function updateLoadingBar(progress) {
            loadingBarProgress.style.width = `${progress}%`;
        }
        
        // Play/Pause functionality
        playPauseButton.addEventListener('click', function() {
            if (audioPlayer.paused) {
                audioPlayer.play();
                playPauseButton.innerHTML = '<i class="fa-thin fa-pause"></i>';
                playPauseButton.classList.add('active');
            } else {
                audioPlayer.pause();
                playPauseButton.innerHTML = '<i class="fa-thin fa-play"></i>';
                playPauseButton.classList.remove('active');
            }
        });
        
        // Volume control
        let isMuted = false;
        volumeButton.addEventListener('click', function() {
            isMuted = !isMuted;
            audioPlayer.muted = isMuted;
            volumeButton.innerHTML = isMuted ? 
                '<i class="fa-thin fa-volume-xmark"></i>' : 
                '<i class="fa-thin fa-volume-high"></i>';
        });
        
        // Progress bar interaction
        audioProgress.addEventListener('click', function(e) {
            const rect = this.getBoundingClientRect();
            const pos = (e.clientX - rect.left) / rect.width;
            audioPlayer.currentTime = pos * audioPlayer.duration;
        });
        
        // Update duration when metadata is loaded
        audioPlayer.addEventListener('loadedmetadata', function() {
            durationDisplay.textContent = formatTime(audioPlayer.duration);
        });
        
        // Update progress while playing
        audioPlayer.addEventListener('timeupdate', updateProgress);
        
        // Handle audio end
        audioPlayer.addEventListener('ended', function() {
            playPauseButton.innerHTML = '<i class="fa-thin fa-play"></i>';
            playPauseButton.classList.remove('active');
            audioPlayer.currentTime = 0;
        });

        // Scene initialization
        let currentScene = 'Swarm';
        const scenes = [
            'Swarm',
            'Scene 2',
            'Scene 3',
            'Scene 4',
            'Scene 5',
            'Scene 6',
            'Scene 7',
            'Scene 8',
            'Scene 9',
            'Scene 10',
            'Scene 11',
            'Scene 12'
        ];

        // Initialize scene
        function initializeScene(sceneName) {
            currentScene = sceneName;
            document.querySelector('.scene-name-tag').textContent = sceneName;
            document.querySelector('.scene-info-tag').textContent = `${scenes.indexOf(sceneName) + 1}/${scenes.length}`;
            
            // Reset loading bar
            updateLoadingBar(0);
            
            // Trigger scene change in Three.js
            if (window.sceneManager) {
                window.sceneManager.loadScene(sceneName);
            }
        }

        // Scene control functionality
        firstSceneButton.addEventListener('click', function() {
            initializeScene(scenes[0]);
        });

        prevSceneButton.addEventListener('click', function() {
            const currentIndex = scenes.indexOf(currentScene);
            const prevIndex = (currentIndex - 1 + scenes.length) % scenes.length;
            initializeScene(scenes[prevIndex]);
        });

        nextSceneButton.addEventListener('click', function() {
            const currentIndex = scenes.indexOf(currentScene);
            const nextIndex = (currentIndex + 1) % scenes.length;
            initializeScene(scenes[nextIndex]);
        });

        randSceneButton.addEventListener('click', function() {
            const randomIndex = Math.floor(Math.random() * scenes.length);
            initializeScene(scenes[randomIndex]);
        });

        // Audio reactivity
        audioPlayer.addEventListener('play', function() {
            if (window.sceneManager) {
                window.sceneManager.setAudioReactive(true);
            }
        });

        audioPlayer.addEventListener('pause', function() {
            if (window.sceneManager) {
                window.sceneManager.setAudioReactive(false);
            }
        });

        // Initialize with Swarm scene
        document.addEventListener('DOMContentLoaded', function() {
            initializeScene('Swarm');
        });

        // Initialize loading bar
        updateLoadingBar(0);

        // Initialize playlist on load
        initializePlaylist();
    </script>
</body>
</html> 